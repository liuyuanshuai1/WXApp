<view class="rewards-container">
  <!-- 自定义导航栏 -->
  <navigation-bar title="奖励商城" background="#fff" color="#000" back="{{true}}" bindback="onBack"></navigation-bar>
  
  <!-- 用户积分信息 -->
  <view class="points-header">
    <view class="points-info">
      <text class="points-label">我的积分</text>
      <text class="points-value">{{userPoints}}分</text>
    </view>
    <view class="points-history" bindtap="viewPointsHistory">
      <text>积分明细</text>
      <text class="arrow">></text>
    </view>
  </view>
  
  <!-- 奖励列表 -->
  <scroll-view class="rewards-scroll" scroll-y>
    <view class="rewards-list">
      <view class="reward-item" wx:for="{{rewardsList}}" wx:key="id">
        <image class="reward-image" src="{{item.imageUrl || '/static/images/reward-default.png'}}" binderror="onImageError"></image>
        <view class="reward-info">
          <text class="reward-title">{{item.title}}</text>
          <text class="reward-description">{{item.description}}</text>
          <view class="reward-footer">
            <text class="reward-points">{{item.points}}分</text>
            <button class="redeem-btn {{item.points > userPoints ? 'disabled' : ''}}" 
                    bindtap="redeemReward" 
                    data-id="{{item.id}}"
                    disabled="{{item.points > userPoints}}">
              {{item.points > userPoints ? '积分不足' : '立即兑换'}}
            </button>
          </view>
        </view>
      </view>
    </view>
    
    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{rewardsList.length === 0}}">
      <image class="empty-icon" src="/static/images/rewards-empty.png" binderror="onImageError"></image>
      <text class="empty-text">暂无奖励</text>
      <text class="empty-desc">当前没有可兑换的奖励</text>
    </view>
  </scroll-view>
  
  <!-- 悬浮按钮（仅家长可见） -->
  <view class="fab" wx:if="{{isParent}}" bindtap="createReward">
    <text class="fab-icon">+</text>
  </view>
</view>